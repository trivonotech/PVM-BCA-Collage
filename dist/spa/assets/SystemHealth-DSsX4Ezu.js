import{f,r,j as e,D as je,F as K,u as xe,q as P,H as U,o as W,h as F,i as q,J as Ne,K as se,X as ke,N as Se,O as Ae,Q as De,R as ae,V as Z,b as g,n as Ce,d as B,A as Te,W as $e,Y as ie,Z as Le,_ as Me,$ as Fe,a0 as me,t as Ie,a1 as O,a2 as Ee,l as ne,s as Re,a3 as _e,a4 as re,a5 as oe}from"./index-DsaPcyCG.js";const Pe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],he=f("circle-alert",Pe);const Be=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Ue=f("cpu",Be);const Ve=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ze=f("external-link",Ve);const Oe=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],We=f("hard-drive",Oe);const qe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],le=f("history",qe);const He=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Ge=f("network",He);const Je=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Qe=f("refresh-ccw",Je);const Ye=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],ue=f("server",Ye);const Ke=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Ze=f("smartphone",Ke);const Xe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],et=f("wifi",Xe);const tt=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],pe=f("wrench",tt);const st=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],o=f("zap",st);function at({isOpen:n,onClose:m,counts:i}){r.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]);const t={reads:5e4,writes:2e4,storageMB:1024,bandwidthGB:10},b=(i.totalVisits||0)*8,d=i.events+i.students+i.news+i.faculty+(i.courses||0)+(i.placements||0),v=(d*.5).toFixed(1),j=(h,T)=>Math.min(h/T*100,100),u=({label:h,icon:T,val:k,limit:I,unit:E,color:C})=>{const y=j(k,I);return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(T,{className:`w-4 h-4 ${C}`}),e.jsx("span",{className:"font-medium text-sm",children:h})]}),e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[k.toLocaleString()," / ",I.toLocaleString()," ",E]})]}),e.jsx("div",{className:"w-full bg-gray-100 h-2.5 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${y>80?"bg-red-500":N(C)}`,style:{width:`${y}%`}})}),e.jsxs("p",{className:"text-[10px] text-gray-400 mt-1 text-right",children:[y.toFixed(1),"% Used"]})]})},N=h=>h.includes("purple")?"bg-purple-500":h.includes("blue")?"bg-blue-500":h.includes("orange")?"bg-orange-500":h.includes("green")?"bg-green-500":"bg-gray-500";return n?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 p-6 text-white flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5 text-green-400"}),"Firebase Limits"]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Daily Quota & Storage usage (Spark Plan)"})]}),e.jsx("button",{onClick:m,className:"text-gray-400 hover:text-white transition",children:"âœ–"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-3 rounded-lg mb-6 flex gap-3",children:[e.jsx(je,{className:"w-5 h-5 text-blue-600 shrink-0"}),e.jsxs("p",{className:"text-xs text-blue-700",children:["These are ",e.jsx("strong",{children:"estimates"})," based on your content. Resets every day at midnight (Pacific Time)."]})]}),e.jsx(u,{label:"Firestore Reads (Daily)",icon:K,val:b,limit:t.reads,unit:"ops",color:"text-blue-500"}),e.jsx(u,{label:"Firestore Writes (Daily)",icon:K,val:d*2,limit:t.writes,unit:"ops",color:"text-orange-500"}),e.jsx(u,{label:"Storage (Total)",icon:We,val:Number(v),limit:t.storageMB,unit:"MB",color:"text-purple-500"}),e.jsx(u,{label:"Network Bandwidth",icon:et,val:.5,limit:t.bandwidthGB,unit:"GB",color:"text-green-500"})]}),e.jsx("div",{className:"bg-gray-50 p-4 text-center border-t border-gray-100",children:e.jsx("button",{onClick:m,className:"w-full bg-gray-900 text-white py-2 rounded-xl font-semibold hover:bg-black transition",children:"Close Details"})})]})}):null}function it({isOpen:n,onClose:m}){const[i,t]=r.useState([]),[b,d]=r.useState(!0),[v,j]=r.useState(null),[u,N]=r.useState(null),{toast:h}=xe(),T=localStorage.getItem("currentSessionId"),k=s=>s?s&&typeof s.toDate=="function"?s.toDate():s instanceof Date?s:new Date(s):null,I=s=>{const x=k(s);return x?x.toLocaleString():"Just now"},E=s=>{const x=k(s);return x?x.toLocaleTimeString():"Just now"};r.useEffect(()=>{if(!n)return;const s=P(F(g,"admin_sessions"),W("timestamp","desc"),U(10)),x=q(s,p=>{const $=p.docs.map(R=>({id:R.id,...R.data()}));t($.filter(R=>R.status!=="revoked")),d(!1)},()=>{d(!1)});return document.body.style.overflow="hidden",()=>{x(),document.body.style.overflow="unset"}},[n]),r.useEffect(()=>{if(!u?.id){j(null);return}d(!0);const s=P(F(g,"activity_logs"),Ne("sessionId","==",u.id),W("timestamp","desc"),U(50)),x=q(s,p=>{j(p.docs.map($=>({id:$.id,...$.data()}))),d(!1)},()=>{h({title:"Error",description:"Could not sync activity history.",variant:"destructive"}),d(!1)});return()=>x()},[u?.id]);const[C,y]=r.useState(null),H=async()=>{if(!C)return;const s=C;try{await Ce(B(g,"admin_sessions",s),{status:"revoked",revokedAt:new Date}),h({title:"Device Logged Out",description:"The session has been revoked. They will be logged out immediately.",className:"bg-green-500 text-white border-none"})}catch{h({title:"Action Failed",description:"Could not revoke session.",variant:"destructive"})}finally{y(null)}},V=s=>{N(s)};return n?e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between bg-gray-50/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:e.jsx(se,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"Active Sessions"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage devices logged into Admin Panel"})]})]}),e.jsx("button",{onClick:m,className:"p-2 hover:bg-gray-100 rounded-full transition",children:e.jsx(ke,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:b?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):v?e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4 duration-300",children:[e.jsxs("button",{onClick:()=>{j(null),N(null)},className:"flex items-center gap-2 text-blue-600 font-bold text-sm hover:underline mb-4",children:[e.jsx(Se,{className:"w-4 h-4"})," Back to Sessions"]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100 flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:u.adminName||"Admin"}),e.jsx("p",{className:"text-xs text-gray-500",children:u.email})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-bold text-blue-600",children:u.device}),e.jsx("p",{className:"text-[10px] text-gray-400",children:u.ip})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-1",children:"Session Timeline"}),v.length>0?v.map(s=>e.jsxs("div",{className:"bg-white border border-gray-100 p-3 rounded-xl flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(le,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full ${s.action==="VIEW_PAGE"?"bg-gray-100 text-gray-600":s.action==="CREATE_DATA"?"bg-green-100 text-green-700":s.action==="DELETE_DATA"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:s.action}),e.jsx("span",{className:"text-[10px] text-gray-400",children:E(s.timestamp)})]}),e.jsx("p",{className:"text-xs font-bold text-gray-800 mt-1",children:s.action==="VIEW_PAGE"?`Opened ${s.target}`:s.details})]})]},s.id)):e.jsx("div",{className:"text-center py-12 text-gray-500 italic text-sm",children:"No actions recorded for this session."})]})]}):i.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No active sessions found."}):i.map(s=>{const x=s.id===T;return e.jsxs("div",{className:`p-4 rounded-xl border ${x?"border-blue-200 bg-blue-50/30":"border-gray-100 bg-white hover:border-gray-200"} transition flex flex-col md:flex-row md:items-center justify-between gap-4 group`,children:[e.jsxs("div",{className:"flex items-start gap-4 min-w-0",children:[e.jsx("div",{className:`p-3 rounded-xl shrink-0 ${s.device==="Mobile"?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600"}`,children:s.device==="Mobile"?e.jsx(Ze,{className:"w-6 h-6"}):e.jsx(se,{className:"w-6 h-6"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h4",{className:"font-bold text-gray-800 break-words",children:s.adminName||"Admin"}),e.jsxs("span",{className:"text-gray-400 text-xs font-normal",children:["(",s.device,")"]}),x&&e.jsx("span",{className:"text-[10px] bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-bold uppercase tracking-wider",children:"This Device"})]}),e.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ae,{className:"w-3 h-3"})," ",s.location]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"w-3 h-3"}),I(s.timestamp)]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 flex-wrap",children:[e.jsx("p",{className:"text-[10px] text-gray-400 font-mono",children:s.ip}),e.jsxs("button",{onClick:()=>V(s),className:"inline-flex items-center gap-1 text-[10px] font-bold text-blue-600 hover:text-blue-700 bg-blue-50 px-2 py-0.5 rounded-full border border-blue-100 hover:bg-blue-100 transition whitespace-nowrap",children:[e.jsx(le,{className:"w-3 h-3"})," Activity"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center md:flex-col md:items-end gap-3 shrink-0 pt-2 md:pt-0 border-t md:border-t-0 border-gray-50",children:[!x&&e.jsxs("button",{onClick:()=>y(s.id),className:"px-3 py-1.5 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition flex items-center gap-2 text-xs font-bold border border-red-100 md:opacity-0 md:group-hover:opacity-100 w-full md:w-auto justify-center",children:[e.jsx(ae,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Logout"})]}),e.jsx("div",{className:`flex items-center gap-2 ${x?"":"md:group-hover:hidden"}`,children:x?e.jsxs("div",{className:"px-3 py-1 bg-green-50 text-green-700 rounded-full font-bold text-[10px] flex items-center gap-1 border border-green-100",children:[e.jsx(Z,{className:"w-3 h-3"})," ACTIVE NOW"]}):(()=>{const p=k(s.lastActive)||k(s.timestamp);return p&&Date.now()-p.getTime()<900*1e3?e.jsxs("div",{className:"px-3 py-1 bg-green-50 text-green-600 rounded-full font-bold text-[10px] flex items-center gap-1 border border-green-100",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})," ONLINE"]}):e.jsxs("div",{className:"px-3 py-1 bg-gray-50 text-gray-500 rounded-full font-bold text-[10px] flex items-center gap-1 border border-gray-100",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full"})," AWAY"]})})()})]})]},s.id)})})]}),C&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4 bg-black/10 backdrop-blur-[1px] animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-red-100 p-6 w-full max-w-sm text-center transform scale-100 animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ae,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Logout Device?"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"This will immediately terminate access for this session. Are you sure?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>y(null),className:"flex-1 py-2.5 bg-gray-100 text-gray-700 font-bold rounded-xl hover:bg-gray-200 transition",children:"Cancel"}),e.jsx("button",{onClick:H,className:"flex-1 py-2.5 bg-red-600 text-white font-bold rounded-xl hover:bg-red-700 shadow-lg shadow-red-200 transition",children:"Yes, Logout"})]})]})})]}):null}const nt=(n,m)=>{const i=n.toLowerCase(),t=m||"data";if(i.includes("fetch dynamically imported module"))return{title:"Cache Mismatch Detect",solution:"File was updated during a session. Click below to clear browser state.",icon:e.jsx(Qe,{className:"w-3 h-3 text-emerald-500"}),actionLabel:"Force Hard Refresh",actionType:"AUTO",onAction:()=>window.location.reload()};if(i.includes("permission-denied")||i.includes("insufficient permissions"))return{title:"Auth/Rule Violation",solution:"Unauthorized access detected. Verify Admin role or check Firebase Security Rules.",icon:e.jsx(re,{className:"w-3 h-3 text-amber-500"}),actionType:"CHECK"};if(i.includes("is not a function")){const b=t.charAt(0).toUpperCase()+t.slice(1);return{title:"Precision Fix",solution:`Variable '${t}' is used as a function but isn't one. Initializing it will fix the crash.`,icon:e.jsx(pe,{className:"w-3 h-3 text-blue-500"}),actionType:"REPLACE",anchor:`const ${t} =`,proposedFix:`const [${t}, set${b}] = useState<any[]>([]);`}}if(i.includes("cannot read property")||i.includes("undefined")||i.includes("null")){if(t.includes(".map")||t.includes(".length")||t.includes(".filter")){const b=t.split(".")[0];return{title:"Safe Chaining Patch",solution:`The list '${b}' is likely empty or loading. Use optional chaining to prevent crashes.`,icon:e.jsx(re,{className:"w-3 h-3 text-indigo-500"}),actionType:"REPLACE",anchor:`${t}`,proposedFix:`${b}?.${t.split(".")[1]} || []`}}return{title:"Safety Patch",solution:`Variable '${t}' might be empty. Replace the faulty section with this 'safe' version.`,icon:e.jsx(oe,{className:"w-3 h-3 text-indigo-500"}),actionType:"REPLACE",anchor:`${t}.`,proposedFix:`${t}?.property || null`}}if(i.includes("unexpected token")||i.includes("syntaxerror"))return{title:"Syntax Cleanup",solution:"Brackets or commas are missing. Look for an extra or missing '}' at the end of the file.",icon:e.jsx(me,{className:"w-3 h-3 text-red-500"}),actionType:"DELETE",anchor:"End of File",proposedFix:"// Remove any extra '}' or ')' that you recently added."};if(i.includes("not defined")){if(t==="isVisible"||t==="content")return{title:"Project Power Patch",solution:"Dependencies like 'isVisible' and 'content' are missing. Paste this complete block into your component.",icon:e.jsx(o,{className:"w-3 h-3 text-orange-500"}),actionType:"ADD",anchor:"export default function",proposedFix:`    const { isVisible } = useSectionVisibility();
    const [content, setContent] = useState<any>(null);
    const [missionPoints, setMissionPoints] = useState<string[]>([]);`};if(["toast","isSubmitting","formData","mapUrl"].includes(t))return{title:"Contact Logic Patch",solution:"Contact form states and hooks are missing. Use this complete block to restore functionality.",icon:e.jsx(o,{className:"w-3 h-3 text-blue-500"}),actionType:"ADD",anchor:"export default function",proposedFix:`    const { toast } = useToast();
    const [isSubmitting, setIsSubmitting] = useState(false);
    const [mapUrl, setMapUrl] = useState('https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3151.8354345093747!2d144.9537353159042!3d-37.81720974201434!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x6ad65d4c2b349649%3A0xb6899234e561db11!2sEnvato!5e0!3m2!1sen!2sin!4v1234567890123!5m2!1sen!2sin');
    const [formData, setFormData] = useState({
        name: '',
        email: '',
        phone: '',
        subject: '',
        message: ''
    });`};if(["useParams","useNavigate","useLocation","useSearchParams"].includes(t))return{title:"Router Hook Recovery",solution:`The hook '${t}' is missing. Importing from react-router-dom.`,icon:e.jsx(o,{className:"w-3 h-3 text-blue-500"}),actionType:"ADD",anchor:"import ",proposedFix:`import { ${t} } from 'react-router-dom';`};if(t==="useToast")return{title:"Toast Hook Recovery",solution:"The 'useToast' hook is missing. Importing from UI components.",icon:e.jsx(o,{className:"w-3 h-3 text-purple-500"}),actionType:"ADD",anchor:"import ",proposedFix:'import { useToast } from "@/components/ui/use-toast";'};if(["useState","useEffect","useContext","useReducer","useCallback","useMemo","useRef","useLayoutEffect"].includes(t))return{title:"React Hook Recovery",solution:`The hook '${t}' is missing. Importing from react.`,icon:e.jsx(o,{className:"w-3 h-3 text-blue-500"}),actionType:"ADD",anchor:"import ",proposedFix:`import { ${t} } from 'react';`};if(t.startsWith("use"))return{title:"Missing Hook (Universal)",solution:`The hook '${t}' is missing. Try importing it from your hooks folder.`,icon:e.jsx(o,{className:"w-3 h-3 text-purple-500"}),actionType:"ADD",anchor:"import ",proposedFix:`import { ${t} } from '@/hooks/${t}';`};if(["Calendar","User","ArrowLeft","Tag","Newspaper","Clock","MapPin","Phone","Mail","Award","BookOpen"].includes(t)||t.endsWith("Icon"))return{title:"Icon Import Recovery",solution:`The icon '${t}' is missing. Importing from lucide-react.`,icon:e.jsx(o,{className:"w-3 h-3 text-pink-500"}),actionType:"ADD",anchor:"import ",proposedFix:`import { ${t} } from 'lucide-react';`};if(["db","doc","getDoc","onSnapshot","collection","useState","useEffect","query","orderBy","limit","where"].includes(t))return{title:"Master Import Recovery",solution:"Multiple core imports might be missing. Paste this 'Master Block' at the top of your file to restore everything.",icon:e.jsx(o,{className:"w-3 h-3 text-purple-500"}),actionType:"ADD",anchor:"import ",proposedFix:`import { useState, useEffect } from 'react';
import { db } from '@/lib/firebase';
import { doc, getDoc, onSnapshot, collection, query, orderBy, limit, where } from 'firebase/firestore';
import { useSectionVisibility } from '@/hooks/useSectionVisibility';`};if(["Button","Card","Input","Label","Select","Textarea","Dialog","Sheet","Toast","Accordion","Alert","Avatar","Badge","Checkbox","Command","Context","Dropdown","HoverCard","Menubar","Navigation","Popover","Progress","Radio","ScrollArea","Separator","Slider","Switch","Table","Tabs","Toggle","Tooltip","Form","FormControl","FormField","FormItem","FormLabel","FormMessage"].includes(t))return{title:"UI Component Recovery",solution:`The component '${t}' is a known UI atom. Importing from @/components/ui.`,icon:e.jsx(o,{className:"w-3 h-3 text-indigo-500"}),actionType:"ADD",anchor:"import ",proposedFix:`import { ${t} } from '@/components/ui/${t.toLowerCase()}';`};if(/^[A-Z]/.test(t))return{title:"App Component Recovery",solution:`The component '${t}' is missing. Importing from main components folder.`,icon:e.jsx(o,{className:"w-3 h-3 text-cyan-500"}),actionType:"ADD",anchor:"import ",proposedFix:`import ${t} from '@/components/${t}';`};if(t==="displayMission")return{title:"Mission Logic Recovery",solution:"This variable manages the visibility of mission points. Use this ternary logic.",icon:e.jsx(o,{className:"w-3 h-3 text-red-500"}),actionType:"ADD",anchor:"const defaultMission =",proposedFix:"const displayMission = missionPoints.length > 0 ? missionPoints : defaultMission;"};if(t==="steps")return{title:"Admissions Steps Recovery",solution:"Detected 'steps' for Admissions. Using explicit cache key 'cache_admission_steps'.",icon:e.jsx(o,{className:"w-3 h-3 text-red-500"}),actionType:"ADD",anchor:"export default function",proposedFix:`const [steps, setSteps] = useState<any[]>(() => {
        const cached = localStorage.getItem('cache_admission_steps');
        return cached ? JSON.parse(cached) : [];
    });`};if(t==="scholarships")return{title:"Scholarships Pattern Recovery",solution:"Detected 'scholarships'. Using explicit cache key 'cache_admission_scholarships'.",icon:e.jsx(o,{className:"w-3 h-3 text-red-500"}),actionType:"ADD",anchor:"export default function",proposedFix:`const [scholarships, setScholarships] = useState<any[]>(() => {
        const cached = localStorage.getItem('cache_admission_scholarships');
        return cached ? JSON.parse(cached) : [];
    });`};if(t==="events")return{title:"Events Logic Recovery",solution:"Detailed 'events' state with 'cache_sl_events' key.",icon:e.jsx(o,{className:"w-3 h-3 text-orange-500"}),actionType:"ADD",anchor:"export default function",proposedFix:`const [events, setEvents] = useState<Event[]>(() => {
        const cached = localStorage.getItem('cache_sl_events');
        return cached ? JSON.parse(cached) : [];
    });`};if(t.startsWith("handle"))return{title:"Event Handler Patch (AI Detected)",solution:`Detected a missing event handler '${t}'. Use this generic function block.`,icon:e.jsx(o,{className:"w-3 h-3 text-pink-500"}),actionType:"ADD",anchor:"export default function",proposedFix:`const ${t} = (e: any) => {
        if (e && e.preventDefault) e.preventDefault();
        console.log('${t} triggered');
    };`};if(t.startsWith("is")||t.startsWith("has")||t.startsWith("show")||t.startsWith("can")||t.toLowerCase().includes("loading")){const d=t.toLowerCase().includes("loading")?"true":"false";return{title:"Boolean State Patch (AI Detected)",solution:`Detected a missing boolean flag '${t}'. Initialize it as a state.`,icon:e.jsx(o,{className:"w-3 h-3 text-cyan-500"}),actionType:"ADD",anchor:"export default function",proposedFix:`const [${t}, set${t.charAt(0).toUpperCase()+t.slice(1)}] = useState(${d});`}}if(t.startsWith("set")){const d=t.slice(3).charAt(0).toLowerCase()+t.slice(4);return{title:"State Setter Patch (AI Detected)",solution:`Detected a missing setter '${t}'. You likely need the full useState pairing.`,icon:e.jsx(o,{className:"w-3 h-3 text-green-500"}),actionType:"ADD",anchor:"export default function",proposedFix:`const [${d}, ${t}] = useState(null);`}}if(t.includes("Category")||t.includes("Filter")||t.includes("Sort")||t.includes("Type"))return{title:"Selection State Patch (AI Detected)",solution:`Detected a missing selection state '${t}'. Initializing with default 'All'.`,icon:e.jsx(o,{className:"w-3 h-3 text-emerald-500"}),actionType:"ADD",anchor:"export default function",proposedFix:`const [${t}, set${t.charAt(0).toUpperCase()+t.slice(1)}] = useState('All');`};if(t.endsWith("s")||t.includes("List")||t.includes("Points")||t.includes("Data")||t.includes("Collection"))return{title:"Smart List Patch (AI Detected)",solution:`Detected a missing list '${t}'. Initializing with Smart Caching pattern.`,icon:e.jsx(o,{className:"w-3 h-3 text-orange-500"}),actionType:"ADD",anchor:"export default function",proposedFix:`const [${t}, set${t.charAt(0).toUpperCase()+t.slice(1)}] = useState<any[]>(() => {
        const cached = localStorage.getItem('cache_${t}');
        return cached ? JSON.parse(cached) : [];
    });`};if(["Button","Card","Input","Label","Select","Textarea","Dialog","Sheet","Toast"].includes(t)||t.endsWith("Icon")){const d=t.endsWith("Icon")?"lucide-react":"@/components/ui/"+t.toLowerCase();return{title:"UI Component Patch (AI Detected)",solution:`Detected a missing UI component '${t}'. Auto-importing from your UI library.`,icon:e.jsx(o,{className:"w-3 h-3 text-purple-500"}),actionType:"ADD",anchor:"import ",proposedFix:`import { ${t} } from '${d}';`}}return i.includes(".trim")||i.includes(".tolowercase")||i.includes(".replace")||i.includes(".includes")?{title:"String Safety Patch (AI Detected)",solution:`The variable '${t}' caused a crash on a string method. Initializing as empty string.`,icon:e.jsx(oe,{className:"w-3 h-3 text-yellow-500"}),actionType:"ADD",anchor:"export default function",proposedFix:`const [${t}, set${t.charAt(0).toUpperCase()+t.slice(1)}] = useState<string>('');`}:{title:"Generic State Patch (AI Detected)",solution:` Variable '${t}' is missing. Initializing as a safe null state.`,icon:e.jsx(o,{className:"w-3 h-3 text-gray-500"}),actionType:"ADD",anchor:"export default function",proposedFix:`const [${t}, set${t.charAt(0).toUpperCase()+t.slice(1)}] = useState<any>(null);`}}return{title:"Anomaly Log",solution:"Unknown issue. Check browser console for a full trace.",icon:e.jsx(he,{className:"w-3 h-3 text-gray-400"}),actionType:"CHECK"}},ce=n=>{if(!n)return null;try{const m=n.match(/\/pages\/(.*?\.tsx).*?:(\d+):(\d+)/);if(m)return{fileName:m[1],line:m[2],column:m[3]};const i=n.match(/at\s+(.*?)\s+\(/i);if(i)return{fileName:i[1],line:"?",column:"?"}}catch{return null}return null},de=n=>{if(!n)return null;n.toLowerCase();const m=n.match(/reading '(.*?)'/);if(m)return m[1];const i=n.match(/(.*?) is not defined/);if(i)return i[1];const t=n.match(/(.*?) is not a function/);return t?t[1]:null};function ct(){const{toast:n}=xe(),[m,i]=r.useState(null),[t,b]=r.useState(!0),[d,v]=r.useState("offline"),[j,u]=r.useState(null),[N,h]=r.useState([]),[T,k]=r.useState([]),[I,E]=r.useState(!1),[C,y]=r.useState(!1),[H,V]=r.useState(!1),[s,x]=r.useState({events:0,students:0,news:0,faculty:0,courses:0,placements:0}),[p,$]=r.useState(!1),[R,X]=r.useState(!1),[ee,te]=r.useState(!1),[G,ge]=r.useState(null),fe=a=>{navigator.clipboard.writeText(a),n({title:"Fix Copied",description:"Code patch copied to clipboard. Apply it to your file to resolve the issue.",className:"bg-[#0B0B3B] text-white border-blue-500/50"})},be=async a=>{try{await Ie(B(g,"system_logs",a)),h(w=>w.filter(S=>S.id!==a)),n({title:"Log Dismissed",description:"Security record has been archived.",className:"bg-[#0B0B3B] text-white border-blue-500/50"})}catch{n({title:"Dismiss Failed",description:"Failed to archive record.",variant:"destructive"})}},ye=async()=>{if(window.confirm("Are you sure you want to clear all system vulnerability logs? This cannot be undone."))try{te(!0);const a=P(F(g,"system_logs")),w=await O(a),S=Ee(g);w.docs.forEach(l=>S.delete(l.ref)),await S.commit(),h([]),n({title:"Logs Cleared",description:"All system vulnerability records have been purged.",className:"bg-[#0B0B3B] text-white border-blue-500/50"}),ne({action:"CLEAR_LOGS",target:"System Logs",details:"Purged all system vulnerability logs"})}catch{n({title:"Cleanup Failed",description:"Failed to purge database records.",variant:"destructive"})}finally{te(!1)}},we=async()=>{try{X(!0),await Re(B(g,"settings","security"),{isActive:!p},{merge:!0}),n({title:"Security Shield",description:`Protection ${p?"Deactivated":"Activated"}`,className:"bg-[#0B0B3B] text-white border-blue-500/50"}),ne({action:"SECURITY_TOGGLE",target:"Security Shield",details:`${p?"Deactivated":"Activated"} Security Shield`})}catch{n({title:"Action Failed",description:"Failed to update security parameters.",variant:"destructive"})}finally{X(!1)}};r.useEffect(()=>{const a=q(B(g,"analytics","aggregate"),c=>{c.exists()?(i(c.data()),v("online")):(i({totalVisits:0}),v("online")),b(!1)},()=>v("offline")),w=q(B(g,"settings","security"),c=>{c.exists()&&$(c.data().isActive)}),S=async()=>{const c=performance.now();try{await O(P(F(g,"settings"),U(1))),u(Math.round(performance.now()-c))}catch{u(null)}};S();const l=setInterval(S,3e4);(async()=>{try{const c=P(F(g,"system_logs"),W("timestamp","desc"),U(5)),D=await O(c);h(D.docs.map(L=>({id:L.id,...L.data()})))}catch{console.error("Error logs fetch failed")}})();const z=async()=>{try{const c=P(F(g,"admin_sessions"),W("timestamp","desc"),U(20)),D=await O(c),L=new Date(Date.now()-900*1e3),Q=D.docs.filter(_=>{const M=_.data(),Y=M.lastActive?.toDate?M.lastActive.toDate():M.timestamp?.toDate?M.timestamp.toDate():new Date;return M.status!=="revoked"&&Y>L});k(Q.map(_=>({id:_.id,..._.data()})))}catch{console.error("Session monitor failed")}};z();const ve=setInterval(z,6e4);return(async()=>{const c=async D=>(await _e(F(g,D))).data().count;try{const[D,L,Q,_,M,Y]=await Promise.all([c("events"),c("students"),c("news"),c("users"),c("courses"),c("placements")]);x({events:D,students:L,news:Q,faculty:_,courses:M,placements:Y})}catch{console.error("Aggregator failed")}})(),()=>{a(),w(),clearInterval(l),clearInterval(ve)}},[]);const J=(a=>a?a<150?{label:"Optimal",color:"text-emerald-500",bg:"bg-emerald-500/10"}:a<500?{label:"Standard",color:"text-blue-500",bg:"bg-blue-500/10"}:{label:"Slow",color:"text-orange-500",bg:"bg-orange-500/10"}:{label:"Offline",color:"text-red-500",bg:"bg-red-500/10"})(j);return e.jsx(Te,{children:e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsx(at,{isOpen:I,onClose:()=>E(!1),counts:{...s,totalVisits:m?.totalVisits||0}}),e.jsx($e,{isOpen:C,onClose:()=>y(!1)}),e.jsx(it,{isOpen:H,onClose:()=>V(!1)}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[e.jsx(ie,{className:"w-10 h-10 text-blue-600"}),"System ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600",children:"Overview"})]}),e.jsx("p",{className:"text-gray-500 font-medium mt-1",children:"Real-time infrastructure health and security metrics"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:`animate-ping absolute inline-flex h-full w-full rounded-full opacity-75 ${d==="online"?"bg-emerald-400":"bg-red-400"}`}),e.jsx("span",{className:`relative inline-flex rounded-full h-3 w-3 ${d==="online"?"bg-emerald-500":"bg-red-500"}`})]}),e.jsx("span",{className:"text-sm font-bold uppercase tracking-wider text-gray-700",children:"Live Services"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl shadow-blue-500/5 border border-blue-50 flex flex-col justify-between group hover:border-blue-200 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-2xl group-hover:bg-blue-600 transition-colors",children:e.jsx(K,{className:"w-6 h-6 text-blue-600 group-hover:text-white"})}),e.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${d==="online"?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:d})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Data Pipeline"}),e.jsx("h3",{className:"text-3xl font-black text-gray-800",children:"Operational"})]})]}),e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl shadow-indigo-500/5 border border-indigo-50 flex flex-col justify-between group hover:border-indigo-200 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("div",{className:"p-3 bg-indigo-50 rounded-2xl group-hover:bg-indigo-600 transition-colors",children:e.jsx(Ge,{className:"w-6 h-6 text-indigo-600 group-hover:text-white"})}),e.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${J.bg} ${J.color}`,children:J.label})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Response Lag"}),e.jsx("h3",{className:"text-3xl font-black text-gray-800",children:j?`${j}ms`:"---"})]})]}),e.jsxs("div",{className:"bg-[#0B0B3B] rounded-[2rem] p-6 shadow-2xl border border-white/10 flex flex-col justify-between relative overflow-hidden group",children:[e.jsx("div",{className:"absolute -right-4 -top-4 opacity-10 group-hover:rotate-12 transition-transform duration-700",children:e.jsx(Le,{className:"w-40 h-40 text-white"})}),e.jsxs("div",{className:"flex items-center justify-between mb-8 relative z-10",children:[e.jsx("div",{className:"p-3 bg-white/10 rounded-2xl",children:e.jsx(Me,{className:"w-6 h-6 text-blue-400"})}),e.jsx("button",{onClick:we,disabled:R,className:`relative inline-flex h-7 w-12 items-center rounded-full transition-all ${p?"bg-blue-500":"bg-white/20"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition-transform ${p?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"relative z-10 flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-blue-300/50 uppercase tracking-widest mb-1",children:"Shield Status"}),e.jsx("h3",{className:"text-3xl font-black text-white",children:p?"Armed":"Disarmed"})]}),e.jsx("button",{onClick:()=>y(!0),className:"bg-white/10 p-2 rounded-xl text-white hover:bg-white/20 transition-colors",children:e.jsx(Fe,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{onClick:()=>E(!0),className:"bg-gradient-to-br from-indigo-600 to-purple-700 rounded-[2rem] p-6 shadow-2xl border border-white/10 flex flex-col justify-between group cursor-pointer hover:scale-[1.02] transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-2xl",children:e.jsx(Ue,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"p-2 bg-white/10 rounded-lg text-white",children:e.jsx(ze,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-white/50 uppercase tracking-widest mb-1",children:"Instance Assets"}),e.jsx("h3",{className:"text-2xl font-black text-white",children:"Resource Metrics"})]})]})]}),e.jsxs("div",{onClick:()=>V(!0),className:"bg-white rounded-3xl p-6 shadow-xl shadow-blue-500/5 border border-blue-50 flex flex-wrap items-center justify-between gap-6 hover:shadow-2xl hover:border-blue-200 transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-500/20 group-hover:scale-110 transition-transform",children:e.jsx(ue,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 leading-none mb-1",children:"Advanced Fleet Monitor"}),e.jsxs("p",{className:"text-blue-600 text-sm font-bold flex items-center gap-2",children:[e.jsx("span",{className:"flex h-2 w-2 rounded-full bg-blue-600 animate-pulse"}),T.length," Devices active on central grid"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"hidden sm:flex -space-x-4",children:[...Array(3)].map((a,w)=>e.jsx("div",{className:"w-10 h-10 rounded-full border-4 border-white bg-blue-50 flex items-center justify-center",children:e.jsx(ie,{className:"w-4 h-4 text-blue-400"})},w))}),e.jsx("div",{className:"bg-gray-900 text-white px-6 py-3 rounded-2xl font-bold text-sm tracking-wide group-hover:bg-blue-600 transition-colors",children:"Manage Sessions"})]})]}),e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl shadow-red-500/5 border border-red-50 overflow-hidden",children:[e.jsxs("div",{className:"p-8 border-b border-red-50 bg-red-50/20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-2xl flex items-center justify-center shadow-lg shadow-red-500/20",children:e.jsx(me,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-gray-900",children:"System Vulnerability Logs"}),e.jsx("p",{className:"text-sm text-red-600 font-bold uppercase tracking-widest",children:"Live Security Feed"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:ye,disabled:ee||N.length===0,className:"bg-red-600/10 text-red-600 px-4 py-1.5 rounded-full text-xs font-black tracking-widest uppercase hover:bg-red-600 hover:text-white transition-all disabled:opacity-50 flex items-center gap-2",children:ee?"Purging...":"Clear All Logs"}),e.jsxs("span",{className:"bg-red-600 text-white px-4 py-1.5 rounded-full text-xs font-black tracking-widest uppercase",children:[N.length," Critical Events"]})]})]}),e.jsx("div",{className:"divide-y divide-gray-100",children:t?e.jsxs("div",{className:"p-20 text-center animate-pulse",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-600 rounded-full mx-auto animate-spin mb-4"}),e.jsx("p",{className:"text-gray-400 font-bold uppercase tracking-widest",children:"Decrypting Logs..."})]}):N.length>0?N.map((a,w)=>e.jsxs("div",{className:"p-6 hover:bg-red-50/30 transition-all flex items-start gap-4 md:gap-6 group",children:[e.jsx("div",{className:"hidden md:block w-1 bg-red-100 group-hover:bg-red-600 transition-colors self-stretch rounded-full"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest bg-red-100 text-red-700 px-2.5 py-1 rounded-lg",children:a.component||"CORE"}),e.jsx("div",{className:"flex-1 min-w-[100px] md:min-w-0",children:e.jsx("p",{className:"text-sm font-black text-gray-900 leading-tight line-clamp-2",children:a.message?.split(`
`)[0]})}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-gray-400 uppercase tracking-widest whitespace-nowrap bg-gray-50 px-2 py-1 rounded-lg",children:[e.jsx(o,{className:"w-3 h-3 text-red-400"}),a.timestamp?.toDate?a.timestamp.toDate().toLocaleString("en-US",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Real-time"]})]}),a.message&&a.message.includes(`
`)&&e.jsx("div",{className:"mt-2 bg-red-50/50 rounded-xl p-3 border border-red-100/50",children:e.jsx("pre",{className:"text-[11px] font-mono text-red-600/80 overflow-x-auto whitespace-pre-wrap max-h-[120px] scrollbar-thin scrollbar-thumb-red-200",children:a.message})}),!a.message?.includes(`
`)&&a.message&&a.message.length>100&&e.jsx("p",{className:"text-xs text-gray-600 leading-relaxed mb-3",children:a.message}),(()=>{const S=de(a.message||""),l=nt(a.message||"",S);return l?e.jsxs("div",{className:"mt-3 bg-emerald-50/40 border border-emerald-100/50 rounded-xl p-3 flex items-start gap-3",children:[e.jsx("div",{className:"bg-white p-1.5 rounded-lg shadow-sm",children:l.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-[10px] font-black text-emerald-700 uppercase tracking-widest flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:["A.I. Diagnostic Recommendation",e.jsx("span",{className:"bg-emerald-500 w-1.5 h-1.5 rounded-full animate-pulse"})]}),(()=>{const A=ce(a.component||"");return A?e.jsxs("span",{className:"bg-emerald-100 text-emerald-800 px-2 py-0.5 rounded text-[9px] font-mono",children:["TARGET: ",A.fileName," (L:",A.line,")"]}):null})()]}),e.jsx("p",{className:"text-[11px] font-bold text-emerald-900/80 leading-relaxed mt-1",children:l.solution}),(()=>{const A=ce(a.component||""),z=de(a.message||"");return A?e.jsxs("div",{className:"mt-3 bg-emerald-50/50 rounded-xl p-3 border border-emerald-100 flex flex-col gap-2 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2",children:e.jsxs("span",{className:`text-[8px] font-black px-2 py-0.5 rounded leading-none ${l.actionType==="REPLACE"?"bg-blue-500 text-white":l.actionType==="DELETE"?"bg-red-500 text-white":"bg-emerald-600 text-white"}`,children:["ACTION: ",l.actionType||"ADD"]})}),e.jsx("span",{className:"text-[9px] font-black text-emerald-600 uppercase tracking-widest",children:"Guide: Surgical Fix Steps"}),e.jsxs("div",{className:"space-y-2 mt-1",children:[e.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-emerald-900 leading-relaxed",children:[e.jsx("span",{className:"bg-emerald-600 text-white w-3.5 h-3.5 rounded-full flex items-center justify-center text-[8px] flex-shrink-0 mt-0.5",children:"1"}),e.jsxs("span",{children:[e.jsxs("span",{className:"block font-bold text-red-600 mb-0.5",children:["CRASH LOCATION: Line ",A.line]}),"Open ",e.jsx("b",{className:"font-mono text-emerald-700",children:A.fileName}),". (The error happened at line ",A.line,", but we will fix it elsewhere)."]})]}),e.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-emerald-900 leading-relaxed",children:[e.jsx("span",{className:"bg-emerald-600 text-white w-3.5 h-3.5 rounded-full flex items-center justify-center text-[8px] flex-shrink-0 mt-0.5",children:"2"}),e.jsxs("span",{children:[e.jsxs("span",{className:"block font-bold text-blue-600 mb-0.5",children:["FIX LOCATION (",l.anchor?"Anchor":"Search",")"]}),"Scroll up/down and find this text: ",e.jsxs("b",{className:"font-mono bg-white px-1.5 py-0.5 rounded border border-emerald-100 text-emerald-600",children:['"',l.anchor||z||"code block",'"']})]})]}),e.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-emerald-900 leading-relaxed",children:[e.jsx("span",{className:"bg-emerald-600 text-white w-3.5 h-3.5 rounded-full flex items-center justify-center text-[8px] flex-shrink-0 mt-0.5",children:"3"}),e.jsxs("span",{children:[e.jsx("b",{children:l.actionType||"ADD"})," the code from the ",e.jsx("b",{children:"Recommended Patch"})," section below."]})]})]})]}):null})(),l.onAction&&e.jsxs("button",{onClick:l.onAction,className:"mt-2 flex items-center gap-2 bg-emerald-500 text-white px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest hover:bg-emerald-600 transition-all shadow-sm",children:[l.icon&&e.jsx("div",{className:"p-0.5 bg-white/20 rounded-md",children:l.icon}),l.actionLabel||"Apply Fix"]}),l.proposedFix&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("button",{onClick:()=>ge(G===a.id?null:a.id),className:"flex items-center gap-2 bg-blue-600 text-white px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest hover:bg-blue-700 transition-all shadow-sm",children:[e.jsx(pe,{className:"w-3 h-3"}),G===a.id?"Hide Code Fix":"View Code Fix"]}),G===a.id&&e.jsxs("div",{className:"bg-gray-900 rounded-xl p-3 border border-white/10 animate-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[9px] font-black text-blue-400 uppercase tracking-widest",children:"Recommended Patch"}),e.jsx("button",{onClick:()=>fe(l.proposedFix),className:"text-[9px] font-black text-white hover:text-blue-400 transition-colors uppercase",children:"Copy Fix"})]}),e.jsx("pre",{className:"text-[10px] font-mono text-gray-300 leading-relaxed overflow-x-auto whitespace-pre",children:l.proposedFix})]})]})]})]}):null})(),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{className:"text-[10px] font-mono text-gray-400 truncate opacity-60 group-hover:opacity-100 transition-opacity max-w-[200px]",children:["ENV: ",a.userAgent||"Production Environment"]}),e.jsxs("button",{onClick:()=>be(a.id),className:"mt-1 text-[9px] font-black text-gray-400 uppercase tracking-widest hover:text-red-600 transition-colors flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3"}),"Mark as Resolved"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black text-red-600 uppercase tracking-tighter",children:"Unresolved"})]})]})]}),e.jsx("div",{className:"flex flex-col items-center gap-2",children:e.jsx("div",{className:"p-2 bg-red-50 rounded-xl group-hover:bg-red-600 transition-all shadow-sm",children:e.jsx(he,{className:"w-4 h-4 text-red-600 group-hover:text-white"})})})]},w)):e.jsxs("div",{className:"p-20 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Z,{className:"w-10 h-10 text-emerald-600"})}),e.jsx("h3",{className:"text-2xl font-black text-gray-900 mb-2",children:"Perimeter Secured"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No system anomalies detected in current cycle."})]})})]})]})})}export{ct as default};
